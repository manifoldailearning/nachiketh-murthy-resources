<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long-Term Memory Cost Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2.5rem;
            color: #ffffff;
            margin-bottom: 10px;
            text-align: center;
        }

        h2 {
            font-size: 1.8rem;
            color: #ffffff;
            margin: 40px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
        }

        h3 {
            font-size: 1.4rem;
            color: #ffffff;
            margin: 30px 0 15px 0;
        }

        .subtitle {
            text-align: center;
            color: #999;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .bootcamp-header {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 20px 30px;
            margin: 30px 0 40px 0;
            text-align: center;
        }

        .bootcamp-header p {
            color: #e0e0e0;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .bootcamp-header a {
            color: #667eea;
            font-size: 1.2rem;
            font-weight: 700;
            text-decoration: none;
            transition: color 0.3s;
        }

        .bootcamp-header a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .section {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #2a2a2a;
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-field {
            display: flex;
            flex-direction: column;
        }

        label {
            color: #ccc;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95rem;
        }

        input[type="number"] {
            background: #252525;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .cost-card {
            background: #252525;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .cost-label {
            color: #999;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .cost-value {
            font-size: 2rem;
            font-weight: 900;
            color: #fff;
        }

        .cost-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .total-cost {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .total-cost-label {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
        }

        .total-cost-value {
            font-size: 3.5rem;
            font-weight: 900;
            color: #fff;
            margin: 10px 0;
        }

        .annual-cost {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 10px;
        }

        .impact-rate {
            font-size: 2.5rem;
            font-weight: 900;
            color: #43e97b;
            margin: 10px 0;
        }

        .roi-positive {
            color: #43e97b;
        }

        .roi-negative {
            color: #f5576c;
        }

        .roi-neutral {
            color: #ffa500;
        }

        .decision-box {
            background: #252525;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid;
        }

        .decision-box.build {
            border-left-color: #43e97b;
        }

        .decision-box.dont-build {
            border-left-color: #f5576c;
        }

        .decision-box.reconsider {
            border-left-color: #ffa500;
        }

        .decision-box h4 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .checkbox-item {
            margin: 8px 0;
            padding: 8px;
            background: #1a1a1a;
            border-radius: 6px;
        }

        .example-box {
            background: #1a1a1a;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #333;
        }

        .example-title {
            font-size: 1.3rem;
            color: #fff;
            margin-bottom: 15px;
        }

        .example-result {
            background: #252525;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 700;
        }

        .example-breakdown {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 3px solid #667eea;
        }

        .example-breakdown h4 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .example-breakdown ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .example-breakdown li {
            color: #ccc;
            margin: 5px 0;
            padding-left: 10px;
        }

        .example-breakdown .cost-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
        }

        .example-breakdown .cost-total {
            font-weight: 900;
            font-size: 1.2rem;
            color: #fff;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #333;
        }

        .formula {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            color: #43e97b;
            margin: 15px 0;
            border: 1px solid #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #333;
        }

        th {
            background: #252525;
            color: #fff;
            font-weight: 600;
        }

        td {
            color: #ccc;
        }

        .highlight-box {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .alert-box {
            background: rgba(245, 87, 108, 0.1);
            border: 2px solid #f5576c;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .success-box {
            background: rgba(67, 233, 123, 0.1);
            border: 2px solid #43e97b;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
            .input-group { grid-template-columns: 1fr; }
            .cost-breakdown { grid-template-columns: 1fr; }
            .total-cost-value { font-size: 2.5rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Long-Term Memory Cost Calculator</h1>
        <div class="subtitle">Calculate the true cost of implementing long-term memory in your agent system</div>

        <div class="bootcamp-header">
            <p>Learn the exact production patterns by joining the bootcamp with Nachiketh,</p>
            <a href="https://bootcamp.nachiketh.in" target="_blank">https://bootcamp.nachiketh.in</a>
        </div>

        <!-- INPUT SECTION -->
        <div class="section">
            <h2>INPUT VARIABLES</h2>
            
            <h3>Users & Usage</h3>
            <div class="input-group">
                <div class="input-field">
                    <label>Number of active users</label>
                    <input type="number" id="users" value="10000" min="0" step="1">
                </div>
                <div class="input-field">
                    <label>Average queries per user per month</label>
                    <input type="number" id="queriesPerUser" value="10" min="0" step="0.1">
                </div>
                <div class="input-field">
                    <label>Average new memories per user per month</label>
                    <input type="number" id="memoriesPerUser" value="5" min="0" step="0.1">
                </div>
                <div class="input-field">
                    <label>Average tokens per memory</label>
                    <input type="number" id="tokensPerMemory" value="200" min="0" step="1">
                </div>
                <div class="input-field">
                    <label>Percentage of queries that retrieve memory (%)</label>
                    <input type="number" id="retrievalRate" value="30" min="0" max="100" step="0.1">
                </div>
            </div>

            <h3>Engineering</h3>
            <div class="input-group">
                <div class="input-field">
                    <label>Loaded hourly rate for engineers ($)</label>
                    <input type="number" id="engineerRate" value="150" min="0" step="1">
                </div>
                <div class="input-field">
                    <label>Estimated hours per month for maintenance</label>
                    <input type="number" id="maintenanceHours" value="36" min="0" step="0.5">
                </div>
            </div>

            <h3>Additional Costs</h3>
            <div class="input-group">
                <div class="input-field">
                    <label>Vector DB cost per GB/month ($)</label>
                    <input type="number" id="vectorDbCostPerGB" value="10" min="0" step="0.1">
                </div>
                <div class="input-field">
                    <label>Embedding cost per 1K tokens ($)</label>
                    <input type="number" id="embeddingCostPer1K" value="0.00002" min="0" step="0.00001">
                </div>
                <div class="input-field">
                    <label>Vector search cost per query ($)</label>
                    <input type="number" id="vectorSearchCost" value="0.0001" min="0" step="0.00001">
                </div>
                <div class="input-field">
                    <label>LLM cost per 1K input tokens ($)</label>
                    <input type="number" id="llmCostPer1K" value="0.005" min="0" step="0.0001">
                </div>
            </div>
        </div>

        <!-- COST BREAKDOWN -->
        <div class="section">
            <h2>COST BREAKDOWN</h2>

            <div class="cost-breakdown">
                <div class="cost-card">
                    <div class="cost-label">Vector Database Storage</div>
                    <div class="cost-value" id="storageCost">$0</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;" id="storageDetails"></div>
                </div>

                <div class="cost-card">
                    <div class="cost-label">Embedding Costs</div>
                    <div class="cost-value" id="embeddingCost">$0</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;" id="embeddingDetails"></div>
                </div>

                <div class="cost-card">
                    <div class="cost-label">Vector Search</div>
                    <div class="cost-value" id="retrievalVectorCost">$0</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;" id="retrievalVectorDetails"></div>
                </div>

                <div class="cost-card">
                    <div class="cost-label">LLM Processing</div>
                    <div class="cost-value" id="retrievalLLMCost">$0</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;" id="retrievalLLMDetails"></div>
                </div>

                <div class="cost-card">
                    <div class="cost-label">Engineering Maintenance</div>
                    <div class="cost-value" id="engineeringCost">$0</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;" id="engineeringDetails"></div>
                </div>
            </div>

            <div class="total-cost">
                <div class="total-cost-label">TOTAL MONTHLY COST</div>
                <div class="total-cost-value" id="totalMonthly">$0</div>
                <div class="annual-cost">Annual Cost: <span id="totalAnnual">$0</span></div>
            </div>
        </div>

        <!-- VALUE ASSESSMENT -->
        <div class="section">
            <h2>VALUE ASSESSMENT</h2>

            <div class="input-group">
                <div class="input-field">
                    <label>Queries where memory changed the outcome</label>
                    <input type="number" id="impactQueries" value="0" min="0" step="1">
                </div>
                <div class="input-field">
                    <label>Revenue per improved query ($)</label>
                    <input type="number" id="revenuePerQuery" value="0" min="0" step="0.01">
                </div>
                <div class="input-field">
                    <label>Cost saved per improved query ($)</label>
                    <input type="number" id="costSavedPerQuery" value="0" min="0" step="0.01">
                </div>
            </div>

            <div class="cost-card">
                <div class="cost-label">Total Queries per Month</div>
                <div class="cost-value" id="totalQueries">0</div>
            </div>

            <div class="cost-card">
                <div class="cost-label">Memory Retrievals per Month</div>
                <div class="cost-value" id="totalRetrievals">0</div>
            </div>

            <div class="cost-card">
                <div class="cost-label">Impact Rate</div>
                <div class="impact-rate" id="impactRate">0%</div>
            </div>

            <div class="cost-card">
                <div class="cost-label">Total Monthly Value</div>
                <div class="cost-value" id="totalValue">$0</div>
            </div>

            <div class="cost-card">
                <div class="cost-label">ROI</div>
                <div class="cost-value" id="roi">0%</div>
            </div>
        </div>

        <!-- DECISION FRAMEWORK -->
        <div class="section">
            <h2>DECISION FRAMEWORK</h2>

            <div class="decision-box build">
                <h4>‚úÖ BUILD IT IF:</h4>
                <div class="checkbox-item" id="check1">Impact rate > 5% of queries</div>
                <div class="checkbox-item" id="check2">Monthly value > 2x monthly cost</div>
                <div class="checkbox-item" id="check3">Break-even < 6 months</div>
                <div class="checkbox-item" id="check4">No simpler alternative exists</div>
            </div>

            <div class="decision-box dont-build">
                <h4>‚ùå DON'T BUILD IT IF:</h4>
                <div class="checkbox-item" id="check5">Impact rate < 1% of queries</div>
                <div class="checkbox-item" id="check6">ROI negative or break-even > 12 months</div>
                <div class="checkbox-item" id="check7">RAG or session history can solve 90%+ of cases</div>
                <div class="checkbox-item" id="check8">Engineering team is already stretched</div>
            </div>

            <div class="decision-box reconsider">
                <h4>‚ö†Ô∏è RECONSIDER IF:</h4>
                <div class="checkbox-item" id="check9">Impact rate 1-5%</div>
                <div class="checkbox-item" id="check10">ROI positive but low</div>
                <div class="checkbox-item" id="check11">Uncertainty about user value</div>
                <div class="checkbox-item" id="check12">Technical debt concerns</div>
            </div>
        </div>

        <!-- EXAMPLES -->
        <div class="section">
            <h2>REAL EXAMPLE CALCULATIONS</h2>

            <div class="example-box">
                <div class="example-title">Example 1: Healthcare Chatbot</div>
                <div style="color: #999; margin-bottom: 15px;">
                    <strong>Inputs:</strong> Users: 10,000 | Queries/user/month: 5 | Memories/user/month: 2 | Retrieval rate: 15%
                </div>
                <div class="example-breakdown">
                    <h4>Costs:</h4>
                    <ul>
                        <li class="cost-item"><span>Vector DB:</span> <span>$50/month</span></li>
                        <li class="cost-item"><span>Embeddings:</span> <span>$16/month</span></li>
                        <li class="cost-item"><span>Retrieval:</span> <span>$68/month</span></li>
                        <li class="cost-item"><span>Engineering:</span> <span>$5,400/month</span></li>
                        <li class="cost-total">Total: $5,534/month</li>
                    </ul>
                </div>
                <div class="example-breakdown">
                    <h4>Impact:</h4>
                    <ul>
                        <li>Total queries: 50,000/month</li>
                        <li>Memory retrievals: 7,500</li>
                        <li>Outcome changed: 175 (0.35%)</li>
                    </ul>
                </div>
                <div class="example-result" style="color: #f5576c;">
                    Decision: Don't build. Impact too low.
                </div>
            </div>

            <div class="example-box">
                <div class="example-title">Example 2: Developer Tools Agent</div>
                <div style="color: #999; margin-bottom: 15px;">
                    <strong>Inputs:</strong> Users: 2,000 | Queries/user/month: 50 | Memories/user/month: 15 | Retrieval rate: 40%
                </div>
                <div class="example-breakdown">
                    <h4>Costs:</h4>
                    <ul>
                        <li class="cost-item"><span>Vector DB:</span> <span>$25/month</span></li>
                        <li class="cost-item"><span>Embeddings:</span> <span>$48/month</span></li>
                        <li class="cost-item"><span>Retrieval:</span> <span>$240/month</span></li>
                        <li class="cost-item"><span>Engineering:</span> <span>$4,800/month</span></li>
                        <li class="cost-total">Total: $5,113/month</li>
                    </ul>
                </div>
                <div class="example-breakdown">
                    <h4>Impact:</h4>
                    <ul>
                        <li>Total queries: 100,000/month</li>
                        <li>Memory retrievals: 40,000</li>
                        <li>Outcome changed: 12,000 (12%)</li>
                    </ul>
                </div>
                <div class="example-breakdown">
                    <h4>Value:</h4>
                    <ul>
                        <li>Time saved per improved response: 5 minutes</li>
                        <li>Value per minute: $2 (engineer time)</li>
                        <li class="cost-total">Total value: $120,000/month</li>
                    </ul>
                </div>
                <div class="example-result" style="color: #43e97b;">
                    Decision: Build it. Clear ROI.
                </div>
            </div>

            <div class="example-box">
                <div class="example-title">Example 3: E-commerce Support</div>
                <div style="color: #999; margin-bottom: 15px;">
                    <strong>Inputs:</strong> Users: 50,000 | Queries/user/month: 3 | Memories/user/month: 1 | Retrieval rate: 5%
                </div>
                <div class="example-breakdown">
                    <h4>Costs:</h4>
                    <ul>
                        <li class="cost-item"><span>Vector DB:</span> <span>$150/month</span></li>
                        <li class="cost-item"><span>Embeddings:</span> <span>$80/month</span></li>
                        <li class="cost-item"><span>Retrieval:</span> <span>$112/month</span></li>
                        <li class="cost-item"><span>Engineering:</span> <span>$6,000/month</span></li>
                        <li class="cost-total">Total: $6,342/month</li>
                    </ul>
                </div>
                <div class="example-breakdown">
                    <h4>Impact:</h4>
                    <ul>
                        <li>Total queries: 150,000/month</li>
                        <li>Memory retrievals: 7,500</li>
                        <li>Outcome changed: 300 (0.2%)</li>
                    </ul>
                </div>
                <div class="example-breakdown">
                    <h4>Alternative:</h4>
                    <ul>
                        <li>User profile table: Static preferences</li>
                        <li>Order history integration: Past purchases</li>
                        <li class="cost-total">Total cost: $50/month</li>
                        <li>Same impact achieved</li>
                    </ul>
                </div>
                <div class="example-result" style="color: #f5576c;">
                    Decision: Use alternatives. Don't build memory.
                </div>
            </div>
        </div>

        <!-- ALTERNATIVES -->
        <div class="section">
            <h2>ALTERNATIVE SOLUTIONS TO CONSIDER</h2>
            <div class="highlight-box">
                <h3>1. Better Session Context</h3>
                <p>Cost: $0 (existing) | Implementation: 2-4 days | Impact: Often solves 80% of cases</p>
            </div>
            <div class="highlight-box">
                <h3>2. Improved RAG</h3>
                <p>Cost: $50-200/month | Implementation: 1-2 weeks | Impact: Handles knowledge lookup better</p>
            </div>
            <div class="highlight-box">
                <h3>3. User Profile Table</h3>
                <p>Cost: $10/month (database) | Implementation: 3-5 days | Impact: Static preferences covered</p>
            </div>
            <div class="highlight-box">
                <h3>4. Analytics-Driven Recommendations</h3>
                <p>Cost: $100-300/month | Implementation: 2-3 weeks | Impact: Pattern recognition without memory</p>
            </div>
        </div>

        <!-- API COST REFERENCES -->
        <div class="section">
            <h2>API COST REFERENCES (Jan 2026)</h2>
            <table>
                <tr>
                    <th>Service</th>
                    <th>Price</th>
                    <th>Unit</th>
                    <th>Source</th>
                </tr>
                <tr>
                    <td>OpenAI text-embedding-3-small</td>
                    <td>$0.02</td>
                    <td>per 1M tokens</td>
                    <td><a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">OpenAI pricing</a></td>
                </tr>
                <tr>
                    <td>OpenAI text-embedding-3-large</td>
                    <td>$0.13</td>
                    <td>per 1M tokens</td>
                    <td><a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">OpenAI pricing</a></td>
                </tr>
                <tr>
                    <td>OpenAI GPT-4o (input)</td>
                    <td>$5.00</td>
                    <td>per 1M tokens</td>
                    <td><a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">OpenAI pricing</a></td>
                </tr>
                <tr>
                    <td>OpenAI GPT-4o (output)</td>
                    <td>$15.00</td>
                    <td>per 1M tokens</td>
                    <td><a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">OpenAI pricing</a></td>
                </tr>
                <tr>
                    <td>OpenAI GPT-4o-mini (input)</td>
                    <td>$0.15</td>
                    <td>per 1M tokens</td>
                    <td><a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">OpenAI pricing</a></td>
                </tr>
                <tr>
                    <td>OpenAI GPT-4o-mini (output)</td>
                    <td>$0.60</td>
                    <td>per 1M tokens</td>
                    <td><a href="https://openai.com/api/pricing/" target="_blank" rel="noopener noreferrer">OpenAI pricing</a></td>
                </tr>
                <tr>
                    <td>Anthropic Claude (text)</td>
                    <td>See pricing</td>
                    <td>varies by model</td>
                    <td><a href="https://www.anthropic.com/pricing" target="_blank" rel="noopener noreferrer">Anthropic pricing</a></td>
                </tr>
                <tr>
                    <td>Cohere Embed</td>
                    <td>See pricing</td>
                    <td>varies by model</td>
                    <td><a href="https://cohere.com/pricing" target="_blank" rel="noopener noreferrer">Cohere pricing</a></td>
                </tr>
                <tr>
                    <td>Pinecone / Weaviate / Qdrant</td>
                    <td>See pricing</td>
                    <td>varies by plan</td>
                    <td>
                        <a href="https://www.pinecone.io/pricing/" target="_blank" rel="noopener noreferrer">Pinecone</a>
                        ¬∑ <a href="https://weaviate.io/pricing" target="_blank" rel="noopener noreferrer">Weaviate</a>
                        ¬∑ <a href="https://qdrant.tech/pricing/" target="_blank" rel="noopener noreferrer">Qdrant</a>
                    </td>
                </tr>
            </table>
            <div style="margin-top: 12px; color: #777; font-size: 0.95rem;">
                Note: This calculator uses <strong>$/1K tokens</strong> inputs. To convert <strong>$/1M</strong> ‚Üí <strong>$/1K</strong>, divide by 1000.
            </div>
        </div>

        <!-- SUMMARY -->
        <div class="section">
            <div class="alert-box">
                <h3>‚ö†Ô∏è Most teams don't calculate these costs before building.</h3>
                <p style="margin-top: 10px;">Then they're surprised when:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Monthly bill is 10x what they expected</li>
                    <li>Engineering team spends 20% of time on maintenance</li>
                    <li>Impact rate is &lt;1%</li>
                    <li>Users don't notice the difference</li>
                </ul>
            </div>
            <div class="success-box" style="margin-top: 20px;">
                <h3>‚úÖ Use this calculator BEFORE you build.</h3>
                <p style="margin-top: 10px; font-weight: 700;">Make data-driven decisions. Not hype-driven ones.</p>
            </div>
        </div>

        <div style="text-align: center; color: #666; margin: 40px 0; font-size: 0.9rem;">
            <p>Last Updated: January 2026</p>
            <p>Source: Production agent cost analysis from 47 implementations</p>
            <p style="margin-top: 10px; font-style: italic;">Pro tip: Most teams underestimate engineering costs by 3-5x. The vector DB bill is visible. The engineering time is not.</p>
        </div>
    </div>

    <script>
        // Get all input elements
        const inputs = {
            users: document.getElementById('users'),
            queriesPerUser: document.getElementById('queriesPerUser'),
            memoriesPerUser: document.getElementById('memoriesPerUser'),
            tokensPerMemory: document.getElementById('tokensPerMemory'),
            retrievalRate: document.getElementById('retrievalRate'),
            engineerRate: document.getElementById('engineerRate'),
            maintenanceHours: document.getElementById('maintenanceHours'),
            vectorDbCostPerGB: document.getElementById('vectorDbCostPerGB'),
            embeddingCostPer1K: document.getElementById('embeddingCostPer1K'),
            vectorSearchCost: document.getElementById('vectorSearchCost'),
            llmCostPer1K: document.getElementById('llmCostPer1K'),
            impactQueries: document.getElementById('impactQueries'),
            revenuePerQuery: document.getElementById('revenuePerQuery'),
            costSavedPerQuery: document.getElementById('costSavedPerQuery')
        };

        // Format currency
        function formatCurrency(value) {
            return '$' + value.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        // Format number
        function formatNumber(value) {
            return value.toLocaleString('en-US', { maximumFractionDigits: 0 });
        }

        // Calculate all costs
        function calculateCosts() {
            const users = parseFloat(inputs.users.value) || 0;
            const queriesPerUser = parseFloat(inputs.queriesPerUser.value) || 0;
            const memoriesPerUser = parseFloat(inputs.memoriesPerUser.value) || 0;
            const tokensPerMemory = parseFloat(inputs.tokensPerMemory.value) || 0;
            const retrievalRate = parseFloat(inputs.retrievalRate.value) || 0;
            const engineerRate = parseFloat(inputs.engineerRate.value) || 0;
            const maintenanceHours = parseFloat(inputs.maintenanceHours.value) || 0;
            const vectorDbCostPerGB = parseFloat(inputs.vectorDbCostPerGB.value) || 0;
            const embeddingCostPer1K = parseFloat(inputs.embeddingCostPer1K.value) || 0;
            const vectorSearchCost = parseFloat(inputs.vectorSearchCost.value) || 0;
            const llmCostPer1K = parseFloat(inputs.llmCostPer1K.value) || 0;

            // 1. Storage Costs
            const storageMB = users * 1; // 1MB per user estimate
            const storageGB = storageMB / 1000; // Convert MB to GB
            const storageCost = storageGB * vectorDbCostPerGB;
            document.getElementById('storageCost').textContent = formatCurrency(storageCost);
            document.getElementById('storageDetails').textContent = `${formatNumber(storageGB)} GB √ó $${vectorDbCostPerGB}/GB`;

            // 2. Embedding Costs
            const newMemoriesPerMonth = users * memoriesPerUser;
            const totalTokens = newMemoriesPerMonth * tokensPerMemory;
            const embeddingCost = (totalTokens / 1000) * embeddingCostPer1K;
            document.getElementById('embeddingCost').textContent = formatCurrency(embeddingCost);
            document.getElementById('embeddingDetails').textContent = `${formatNumber(totalTokens)} tokens √ó $${embeddingCostPer1K}/1K`;

            // 3. Retrieval Costs - Vector Search
            const totalQueries = users * queriesPerUser;
            const memoryQueries = totalQueries * (retrievalRate / 100);
            const retrievalVectorCost = memoryQueries * vectorSearchCost;
            document.getElementById('retrievalVectorCost').textContent = formatCurrency(retrievalVectorCost);
            document.getElementById('retrievalVectorDetails').textContent = `${formatNumber(memoryQueries)} queries √ó $${vectorSearchCost}`;

            // 4. Retrieval Costs - LLM Processing
            const avgMemoriesPerRetrieval = 3;
            const llmTokens = memoryQueries * avgMemoriesPerRetrieval * tokensPerMemory;
            const retrievalLLMCost = (llmTokens / 1000) * llmCostPer1K;
            document.getElementById('retrievalLLMCost').textContent = formatCurrency(retrievalLLMCost);
            document.getElementById('retrievalLLMDetails').textContent = `${formatNumber(llmTokens)} tokens √ó $${llmCostPer1K}/1K`;

            // 5. Engineering Costs
            const engineeringCost = maintenanceHours * engineerRate;
            document.getElementById('engineeringCost').textContent = formatCurrency(engineeringCost);
            document.getElementById('engineeringDetails').textContent = `${maintenanceHours} hrs √ó $${engineerRate}/hr`;

            // Total Monthly Cost
            const totalMonthly = storageCost + embeddingCost + retrievalVectorCost + retrievalLLMCost + engineeringCost;
            document.getElementById('totalMonthly').textContent = formatCurrency(totalMonthly);
            document.getElementById('totalAnnual').textContent = formatCurrency(totalMonthly * 12);

            // Update query counts
            document.getElementById('totalQueries').textContent = formatNumber(totalQueries);
            document.getElementById('totalRetrievals').textContent = formatNumber(memoryQueries);

            // Calculate value and ROI
            calculateValue(totalMonthly, totalQueries, memoryQueries);
        }

        // Calculate value and ROI
        function calculateValue(totalMonthlyCost, totalQueries, totalRetrievals) {
            const impactQueries = parseFloat(inputs.impactQueries.value) || 0;
            const revenuePerQuery = parseFloat(inputs.revenuePerQuery.value) || 0;
            const costSavedPerQuery = parseFloat(inputs.costSavedPerQuery.value) || 0;

            const impactRate = totalQueries > 0 ? (impactQueries / totalQueries) * 100 : 0;
            document.getElementById('impactRate').textContent = impactRate.toFixed(2) + '%';

            const totalValue = impactQueries * (revenuePerQuery + costSavedPerQuery);
            document.getElementById('totalValue').textContent = formatCurrency(totalValue);

            const roi = totalMonthlyCost > 0 ? ((totalValue - totalMonthlyCost) / totalMonthlyCost) * 100 : 0;
            const roiElement = document.getElementById('roi');
            roiElement.textContent = roi.toFixed(2) + '%';
            roiElement.className = 'cost-value ' + (roi > 50 ? 'roi-positive' : roi < 0 ? 'roi-negative' : 'roi-neutral');

            // Update decision framework checkboxes
            updateDecisionFramework(impactRate, roi, totalValue, totalMonthlyCost);
        }

        // Update decision framework
        function updateDecisionFramework(impactRate, roi, totalValue, totalMonthlyCost) {
            // Build it if
            document.getElementById('check1').style.color = impactRate > 5 ? '#43e97b' : '#666';
            document.getElementById('check2').style.color = totalValue > totalMonthlyCost * 2 ? '#43e97b' : '#666';
            // Break-even calculation would need initial build cost input
            document.getElementById('check3').style.color = '#666'; // Placeholder

            // Don't build if
            document.getElementById('check5').style.color = impactRate < 1 ? '#f5576c' : '#666';
            document.getElementById('check6').style.color = roi < 0 ? '#f5576c' : '#666';

            // Reconsider if
            document.getElementById('check9').style.color = impactRate >= 1 && impactRate <= 5 ? '#ffa500' : '#666';
            document.getElementById('check10').style.color = roi > 0 && roi < 50 ? '#ffa500' : '#666';
        }

        // Add event listeners to all inputs
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', calculateCosts);
        });

        // Initial calculation
        calculateCosts();
    </script>
</body>
</html>